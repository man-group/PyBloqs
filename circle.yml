machine:
  environment:
    COVERALLS_REPO_TOKEN: WnzSri2b3no9Fh0buPancG1krS4jVfQiG

dependencies:
  pre:
    # Load wkhtmltopdf from source since version in Ubuntu is ANCIENT!
    - wget http://download.gna.org/wkhtmltopdf/0.12/0.12.4/wkhtmltox-0.12.4_linux-generic-amd64.tar.xz
    - tar Jxvf wkhtmltox-0.12.4_linux-generic-amd64.tar.xz
    # Install Ubuntu packages
    - sudo apt-get update
    - sudo apt-get install poppler-utils     # pdfinfo for tests
    - sudo apt-get install pandoc            # pandoc for converting iPython notebooks to html in docs
    - sudo apt-get install python-tk         # for headless drawing of notebook content
    - pip install tox
    - pip install tox-pyenv
    - pip install coveralls
    # Load highcharts files locally
    - npm install highcharts highcharts-heatmap highcharts-export-csv highcharts-exporting highcharts-funnel
  override:
    - pyenv local 2.7.12 3.5.3 

test:
  override:
    - tox
  post:
    - coveralls
    - python setup.py build_sphinx
    